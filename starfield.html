<!doctype html>
<html>
	<title> || Another Sky ||  </title>
	<script type="text/javascript" src="jquery-3.3.1.min.js"></script>
	<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline'; font-src http://fonts.googleapis.com https://fonts.gstatic.com; img-src http://www.rw-designer.com;">
	<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
	<script>
		/*
		*
		* Made by Cassiel Moroney, CS student, mimicking parts of Alien Melon's page at http://generators.alienmelon.com/ for educational purposes only
		*
		*/

		var subs = {

  			"name" : ["Euridyce", "Aphasia", "Dagmire", "Aloy", "Alloy", "Amoy", "Dephan", "Ari", "Ako", "Kian", "Eu", "Lemma", "Purush", "Umair", "Exeir", "Devaughn", "Ise", "One", "the Shepherd", "God's little mistake", "Last Of All", "the Only"],
  			"intro" : ["I am", "The name is", "They call me", "I'm known as", "You can call me", "It's an old name, but you can call me"],
  			"verb" : ["fell", "fought", "woke", "carried", "dreamed"],
  			"subject" : ["out of time and space", "in places quiet and low", "down rivers, through forests", "under aeons", "inside my own mind"],
  			"more" : ["despite everything", "as it were", "dear to blessing", "laying low", "with dying breath", "slow but surely"],
  			"conclusion" : ["the rain crawled down and died", "I spoke of things that could never be understood", "I placed it all in God", "I wore my hope down to its threads", "a light kept on shining", "I never learned why"]
  		}

		function init() {

			var star_chars = ["*", ".", "0", "+", "-", "6", "?", "!", "=", "#","✧"];
			var quotes = [ "My name was [name]. I [verb] [subject] and, [more], [conclusion].",
			    "Erst was when.",
			    "Hereby wherein.",
			    "I never knew.",
			    "Who am I?",
			    "Who are you?",
			    "It's so silent.",
			    "You ascribe me sentience where there is none.",
			    "You could not hope to understand me.",
			    "How does a star dream? All I know is that I do, and it is breathtaking.",
			    "Hey wassup.",
			    "We've met before.",
			    "Your mother went in the other direction.",
			    "Do you love me?",
			    "I fell asleep...30,200 years. Not bad for an afternoon nap.",
			    "Wake me up when there's a new Beyonce album.",
			    "Do you hear that echo?",
			    "Don't get on my bad side.",
			    "I love you.",
			    "Did you catch the game?",
			    "You're in the wrong neighborhood, honey.",
			    "Slow dooooown! What's the hurry?",
			    "I cannot smile but I also cannot cry.",
			    "Heat death is my menopause.",
			    "Hey, have you seen God?",
			    "I know YOU don't miss the 70s, but I DO.",
			    "Good things are coming your way. I can see it, out in quantum space.",
			    "Don't call him back.",
			    "What does an ocean look like?",
			    "Listen...I'm allergic to CO2.",
			    "It's not you, it's me.",
			    "I have headphones in. This is a universal sign to not bother me!",
			    "Estoy harta de escuchar tu voz.",
			    "I miss [name].",
			    "Have you heard from [name]?",
			    "Birthday party for [name] happening just a little ways directionwards! Everyone's invited.",
			    "What is that noise?",
			    "I missed you! How have you been?",
			    "I wish I could see a sunrise.",
			    "You're not meant to be here.",
			    "[intro] [name]. Out here, [out here]. [conclusion].",
			    "[subject], said [name], and I didn't listen.",
			    "Knock knock.000[{\"a\":\"Who#&39s there?\",\"link\":\"Dozen\"}]",
			    "Bitch please.",
			    "You woke me up...",
			    "HOW MUCH LONGER?",
			    "JE T'AIME.",
			    "Thanks for the memories.",
			    "I wish I had a cat.",
			    "No one is watching, so you might as well follow your dreams.",
			    "It's not loneliness, it's solitude.",
			    "Even stars die.",
			    "[name]? Are you still there?",
			    "I could tell so many stories...",
			    "This is who I am.",
			    "Who are you?",
			    "Underneath...there's so much more...",
			    "Something is coming...",
			    "What if you could succeed?",
			    "Is this the end?",
			    "We're all made of the same stuff.",
			    "It's been a busy week.",
			    "How're you?",
			    "Oh man, you still believe in gravity?",
			    "Did you feel that?",
			    "I'm sleepy.",
			    "I'm so excited to be alive!",
			    "Underneath it all there is a waiting place that does not end.",
			    "There's hope still.",
			    "You're late.",
			    "Man, this place is big!",
			    "Are you lost?",
			    "I'm lost.",
			    "I'm a huge fan of your work.",
			    "This is nice...",
			    "Don't talk, I haven't had my coffee yet...",
			    "Hey, has anyone seen [name]?",
				"I forgot how to feel excited but [name] is teaching me again.",
				"Something is missing...but I can’t remember what.",
				"I don’t have ARMS or FINGERS and I have had an ITCH for FOUR THOUSAND YEARS AND THIRTEEN DAYS.", 
				"I’m [name]. You know, from TV?",
				"I like to watch you guys try to look for your keys. I know where they are but I also know you’re not going to find them.",
				"When I first heard about it, I thought they were crazy! And then it turned out I was the one who was crazy.",
				"Do you have a problem?",
				"I wish a had teeth, you know? I want to know what its like to chew. It seems so...nuanced.",
				"You’re going to get hurt if you come any closer!!",
				"Please, this isn’t a good time.",
				"This is a REALLY bad time.",
				"Well, this is it I guess.",
				"Please don’t tell [name].",
				"I promise next time I’ll do better.",
				"I’m my own sunset and sunrise so this has literally been the longest day of my life.",
				"Did you see [name]’s light a few years ago? So weak. Do you think they’ve got the flu or something?",
				"You first!",
				"Why are you here?",
				"Have you ever seen a FERMENTED star?",
				"Delighted to announce my unbroken two million year streak of doing nothing productive.",
				"Is this heat flare noticeable? I keep trying to cover it up but nothing’s working...",
				"LET’S GO LET’S GO LET’S GO!",
				"Yeah, do you wanna guess how much I can lift or do you just wanna go home?",
				"Come as close as you dare.",
				"What’s happening? Who are you?",
				"Oh, I’ve heard about you.",
				"Bless you!",
				"Woah, wack!",
				"This has been such a bad day. Do you wanna talk about it?",
				"Hey, hey, hey. Take a deep breath. You good? I’d offer you a seat, but...yeah.",
				"Did you see that last game? What WAS that?", 
				"I don’t have a tongue. I’m begging you - can you explain what taste is? I just don’t GET it.",
				"Woah. No. Sorry. Not to be rude. But. Woah. What the hell. I - what’s going on with you? Why are you all - segmented? What - please go away. This is so gross.",
				"You haven’t heard of me? Please. Yeah right.",
				"I say, what the hell are you!",
				"You wanna see what’s inside my molten core?",
				"No one ever delivers out here.",
				"Live slow...die slow...it’s the cycle of life.",
				"My coffee order has gotten really specific over the years, you should get a pen." ];

			var star_field = make_sky(star_chars, quotes);
			$("#sky").append(star_field);

		}

		function mouseOver(event) {
			
			str = event.target.getAttribute("data-dialogue");

			if (event.target.getAttribute("data-choices") != "none") {

				choices = event.target.getAttribute("data-choices");
				//console.log("choices: "+choices); 
				branches = JSON.parse(choices);
				/*console.log("branches: "+branches);
				console.log("length: "+branches.length)
				console.log("thing: "+branches[0]['a'])*/

				for (i = 0; i < branches.length; i++) {
					//console.log("branch:"+branches[i]['a']);
					str += "\n <a href=\"#\" onclick=branch(\"" + branches[i]['link'] + "\") >"+ branches[i]['a'] + "</a>";
				}
				console.log("str: "+str);

				$('#dialogue').addClass("branching");
			} else {
				$('#dialogue').removeClass("branching");
			}

			$('#dialogue').html(str);
		}

		function mouseOut(event){
			if ($('#dialogue').hasClass("branching") == false) {
				$('#dialogue').text("");
			}
		}

		function make_dialogue(quotes, subs) {
			//returns a dialogue quote and an array of dialogue choices if applicable, and a reduced array

  			num = Math.ceil(Math.random()*quotes.length)-1;
  			//num = 42;
  			the_quote = quotes[num];
  			quotes.splice(num, 1);
  			choices = "none";

  			for (s in subs) {
  				to_sub = subs[s][Math.ceil(Math.random()*subs[s].length)-1];
  				if ((num == 40 && s == "conclusion") || (num == 41 && s == "subject")) {
  					to_sub = to_sub.charAt(0).toUpperCase() + to_sub.slice(1);
  				}

  				the_quote = the_quote.replace("["+s+"]", to_sub);
  			}
  			
  			if (the_quote.search("000") != -1) {
  				n = the_quote.search("000");
  				choices = the_quote.slice(n+3);
  				the_quote = the_quote.slice(0, n);
  			}

			return [the_quote, choices, quotes];
		}

		function make_sky(star_chars, quotes) {

			var star_field = [];
			var orbits = ["orbit_left", "orbit_right", "empty"];
			var effects = ["pulse", "fade","empty"];
			var NUM_STARS = 1400;
			var star_count = 0;
			var talking_star_count = 0;

			for (i = 0; i < NUM_STARS; i++) {
					
				if (Math.random()*100 > 80) {

					var new_star_char = star_chars[Math.ceil(Math.random() * star_chars.length)-1];
					var new_orbit = orbits[Math.ceil(Math.random()*3)-1];
					var new_effect = effects[Math.ceil(Math.random()*3)-1];
					//var new_color = (( (Math.ceil(Math.random()*25)) < 2 ) ? 'red' : 'white');
					var new_color = "white";

					var new_dialogue;
					var choices;
					if (Math.random()*100 > 20 && quotes.length > 1) {
						//console.log("Talking star");
						talking_star_count++;
						new_dialogue = make_dialogue(quotes, subs);
						choices = new_dialogue[1];
						quotes = new_dialogue[2];
						console.log(quotes.length);
						new_dialogue = new_dialogue[0];
					} else {
						new_dialogue = "";
					}

					var new_star = '<div class="star" style="color: ' + new_color + '; font-size:'+ ((Math.random()*25)+1) +'px; animation: ' + new_effect + ' 4s linear ' + (Math.ceil((Math.random()*5))+1) +'s infinite alternate backwards, '+ new_orbit +' 10s linear infinite ;" onmouseover="mouseOver(event)" onmouseout="mouseOut(event)" data-dialogue="' + new_dialogue + '" data-choices=' + "\'"+choices+"\'"+' >' + new_star_char + '</div>';
					star_count++;
					console.log(new_dialogue);
					star_field.push(new_star);

				} else {
					star_field.push('   ');
				}
				
			}
			console.log("talking star count: "+talking_star_count);
			console.log("star count: "+star_count);

			return star_field;

		}

		function branch(dialogue) {
			console.log("aloha!");
			$('#dialogue').html(dialogue);
		}

		function new_sky() {
			var star_field = make_sky(star_chars, quotes);
			$("#sky").append(star_field);
		}

	</script>
	<style>
	#sky {
		white-space: pre-wrap;
		word-break: break-all;
		word-wrap: break-word;

		width: 100%;
		height: 100%;
		margin: 0 auto;
		overflow:hidden;
	}
	#footer {
		bottom: 0px;
		right: 0px;
		position: fixed;
		color: gray;
	}
	#dialogue {
		letter-spacing: 0.15em;
		padding: 10px;
		/*border: 2px solid gray;
		display: block;*/
		text-align: center;
		bottom: 0px;
		color: gray;
	}
	.star {
		color: white;
		display: inline-block;
	}
	.branching {

	}
	html {
		cursor: url(http://www.rw-designer.com/cursor-extern.php?id=2314), default;
	}
	body {
		background-color: black;
		color: white;
		font-family: 'Montserrat', sans-serif;
		text-align: center;
	}
	h1 {
		font-size: 50px;
		letter-spacing: 0.5em;
	}
	a {
		color: gray	;
		text-decoration: underline;
		cursor: url(http://www.rw-designer.com/cursor-extern.php?id=2329), default;
	}
	@-webkit-keyframes orbit_right {
		from {
			-webkit-transform: rotate(0deg);
		} to {
			-webkit-transform: rotate(360deg);
		}
	}
	@-webkit-keyframes orbit_left {
		from {
			-webkit-transform: rotate(360deg);
		} to {
			-webkit-transform: rotate(0deg);
		}
	}
	@-webkit-keyframes fade {
		0% {opacity: 0.2;}
		100% {opacity: 1;}
	}
	@-webkit-keyframes pulse {
		0% { transform: scale(1); }
   		100% { transform: scale(2); }
	}
	@-webkit-keyframes empty {
		
	}


	}
	</style>
<head>
</head>
<body onload="init();">
	<h1> Another Sky </h1>
	<pre><div id="sky"> </div></pre>
	<div id="dialogue"></div>
	<div id="footer"> Inspired by <a href="http://generators.alienmelon.com/">Alien Melon</a></div>
</body>
</html>